# 資料聚合和分組
> * 一到多個key(可以是函式、陣列或DataFrame欄位名稱)將一個pandas物件切成多個
> * 計算分組彙總統計值,像是個數、平均值、標準差或使用者自定值
> * 對組進行轉換或其他操作,例如:正規化、線性迴歸或是選擇子集
> * 計算樞紐分析表或是交叉表
> * 進行分位數分析或是其他統計分析
----
## GroupBy 機制
* split apply combine
  * split 分裂:`分割by key`
  * apply 套用:`統計量sum mean...`
  * cobine 合併:`類似r 套件summarise`
* 分組的key的特徵
  * 可以是含值的list或array,只要長度和要用來分組的軸相等
  * DataFrame中一個欄的名稱
  * 可以是dict或Series,指定分組是該用哪些值,以及對應的組名稱
  * 可以是函式,依每個軸索引或每個索引標籤呼叫
----
* 疊代分組
* 選取一或多個欄
* 用Dict和Series進行分組
* 用函式分組
* 用索引層級分組
## 資料聚合
* 做過優化的groupby方法

| 🔥函式名稱 | 🐤描述 |
| -------- |:------:|
|count|計算組中non-NA的值個數|
|sum|將non-NA的值加總|
|mean|將non-NA的值做平均|
|median|將non-NA的值做算術中位數|
|std,var|無偏(分母為n-1)標準差和變異數|
|min,max|non-NA值中最小值和最大值|
|prod|取nan-NA值乘積|
|first,last|第一個和最後一個nan-NA值|

* 欄方向的多功能應用
* 回傳聚合資料時不要列索引
## Apply:分裂-套用-合併
* 分位數與籃(bucket)分析
* 範例:依分組指定填充遺失值
* 範例取樣和排列
* 範例:加權平均和關聯性
* 範例:分組線性迴歸
## 樞紐關係表和交叉表
* pivot_table

| 🔥功能名稱 | 🐤描述 |
| -------- |:------:|
|values|要聚合的名稱;預設是聚合所有數值欄位|
|index|欄位名稱或其他分組key,用來對列分組,以產生樞紐分析表|
|columns|欄位名稱或其他分組key,用來對欄分組,以產生樞紐分析表|
|aggfunc|用來聚合的函式,或函式們(預設是'mean');任何groupby可用的函式這裡都可以用|
|fill_value|在產出表格中用來代替遺失值的值|
|dropna|如果是True,捨棄整欄都是NA的欄|
|margins|加入列/欄的小計和加總(預設為False)|

* 交叉表:Crosstab
